<!DOCTYPE html>
<html lang="tl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FIND YOUR FIRE â€¢ Christmas Youth Assembly 2025</title>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#ffe6e6,#fff0e6);margin:0;padding:20px;color:#333}
    .container{max-width:600px;margin:auto;background:white;border-radius:20px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.2)}
    header{background:#c41e3a;color:white;text-align:center;padding:30px 20px}
    h1{margin:0;font-size:2.2rem}
    .progress{text-align:center;padding:15px;background:#eee;font-weight:bold}
    .prog{height:10px;background:#eee;border-radius:5px;overflow:hidden;margin:15px 20px}
    .bar{height:100%;width:0;background:#c41e3a;transition:width 0.4s}
    .question{padding:20px;border-bottom:1px solid #eee}
    .qt{font-weight:bold;font-size:1.1rem;margin-bottom:8px}
    .en{font-size:0.9rem;color:#666;font-style:italic}
    .options{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    .btn{padding:15px;background:#c41e3a;color:white;border:none;border-radius:10px;font-size:1.1rem;cursor:pointer;transition:0.3s}
    .btn:hover{background:#a0172d}
    .btn.active{background:#28a745}
    .result{padding:30px;text-align:center;display:none}
    #downloadBtn{margin-top:25px;padding:16px 40px;font-size:1.4rem;background:#28a745;border:none;color:white;border-radius:50px;cursor:pointer}
    input#name{width:100%;padding:15px;margin:15px 0;border:2px solid #c41e3a;border-radius:10px;font-size:1.2rem;box-sizing:border-box}
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>FIND YOUR FIRE</h1>
    <p>Christmas Youth Assembly 2025 â€¢ FEMC Philippines</p>
  </header>

  <!-- INTRO -->
  <div id="intro" style="padding:30px;text-align:center">
    <h2>Discover Your Spiritual Gift & Calling!</h2>
    <p>Answer honestly â€¢ 101 questions â€¢ Takes ~20 mins</p>
    <input type="text" id="name" placeholder="Enter your full name">
    <br><br>
    <button class="btn" onclick="startQuiz()" style="padding:18px 50px;font-size:1.4rem">START QUIZ</button>
  </div>

  <!-- QUIZ -->
  <div id="quiz" style="display:none">
    <div class="prog"><div class="bar" id="bar"></div></div>
    <div style="text-align:center;margin:10px 0 20px;font-weight:bold;color:#c41e3a;font-size:1.2rem">
      <span id="progressText">0 / 101</span> answered
    </div>
    <div class="question" id="qtext"></div>
    <div class="options" id="options"></div>
  </div>

  <!-- RESULT -->
  <div class="result" id="result">
    <h2 id="greeting">Congratulations!</h2>
    <h2>Your Calling is...</h2>
    <div id="topWorkshop" style="font-size:3rem;margin:30px 0;color:#c41e3a"></div>
    <p id="description" style="font-size:1.3rem;line-height:1.8"></p>
    <div id="scores"></div>
    <p style="margin:30px 0"><strong>Bible Verse for You:</strong><br><em id="verse" style="font-size:1.4rem"></em></p>
  <button id="downloadBtn">Download My Results as PDF</button>
<p style="font-size:0.9rem;color:#666;margin-top:10px;">
  (On phone: After opening, tap the download/share icon to save)
</p>
    <br><br>
    <button class="btn" onclick="restartQuiz()" style="margin-top:10px;padding:18px 40px;font-size:1.2rem">
      Take Again (Clear All Answers)
    </button>
  </div>
</div>

<audio id="victorySound" preload="auto">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" type="audio/mpeg">
</audio>

<script>
  let userName = "";
  let current = 0;
  let answered = 0;
  let scores   = [0,0,0,0,0]; // A B C D E

  const workshops = ["Bible Teaching","Evangelism","Worship & Music","Digital Ministry","Mercy & Compassion"];
  const icons = ["ðŸ“–", "âœï¸", "ðŸŽµ", "ðŸ’»", "â¤ï¸"];
  const descriptions = [
    "You are called to teach Godâ€™s Word with clarity and depth!",
    "You have a heart to share Jesus boldly with the lost!",
    "You lead others into Godâ€™s presence through music, art, and creativity!",
    "You use media and technology to spread the Gospel!",
    "You show Christâ€™s love through acts of kindness and service!"
  ];
  const verses = ["2 Timothy 2:15","Matthew 28:19-20","Psalm 150:6","Mark 16:15","Matthew 25:40"];

  const questions = [
  // A: BIBLE TEACHING (1â€“20)
  "Sobrang sarap ipaliwanag ang Bible sa barkada\nI love explaining the Bible so friends really get it",
  "Madali ko matandaan ang verses at kwento sa Bible\nI easily remember Bible verses and stories",
  "Masaya ako mag-prepare ng devotion o Bible study\nI enjoy preparing devotions or Bible studies",
  "Ako lagi tinatanong pag may tanong tungkol sa Bible\nPeople always ask me when they have Bible questions",
  "May experience na o gusto ko mag-lead ng Bible study\nI have led or really want to lead a Bible study",
  "Nainis ako kapag mali ang itinuturo tungkol sa Bible\nI get upset when the Bible is taught incorrectly",
  "Kaya ko gawing simple ang mahirap na verses\nI can make hard verses easy to understand",
  "Mas gusto ko magbasa ng Bible kaysa mag-scroll\nI prefer reading the Bible over scrolling on my phone",
  "Nakikita ko sarili ko na nagtuturo ng Bible balang araw\nI see myself teaching the Bible someday",
  "Nagiging energetic ako kapag nagtuturo ng Salita\nI get super energized when teaching Godâ€™s Word",
  "Mahilig ako mag-research ng Bible topics\nI love researching Bible topics",
  "Marami na akong na-share na verses sa GC\nIâ€™ve shared a lot of verses in group chats",
  "Gusto ko maging youth Bible teacher someday\nI want to become a youth Bible teacher one day",
  "Madali akong makahanap ng verse para sa situation\nI can quickly find a verse for any situation",
  "Mas gusto ko ng deep Bible talks kaysa shallow chika\nI prefer deep Bible talks over shallow gossip",
  "May notes ako ng sermons/devos sa phone ko\nI have sermon/devotion notes saved on my phone",
  "Kapag may nagkamali sa verse, gusto ko i-correct\nWhen someone quotes a verse wrong, I want to correct them",
  "Masaya ako kapag may natututo dahil sa paliwanag ko\nIâ€™m happy when someone learns because of my explanation",
  "May sarili akong Bible study routine\nI have my own personal Bible study routine",
  "Feeling ko calling ko talaga ang magturo ng Salita ng Diyos\nI feel my calling is to teach Godâ€™s Word",
  // B: EVANGELISM (21â€“40)
  "Nasasaktan talaga puso ko kapag hindi pa saved ang kaibigan ko\nMy heart really hurts when my friend isnâ€™t saved yet",
  "May na-lead na ako kay Jesus\nI have already led someone to Jesus",
  "Hindi ako nahihiya mag-share ng Gospel kahit kanino\nIâ€™m not ashamed to share the Gospel with anyone",
  "Bukas na bukas ang testimony ko sa social media\nMy testimony is wide open on social media",
  "Pray ko lagi ang mga hindi pa nakakakilala kay Lord\nI constantly pray for those who donâ€™t know Jesus yet",
  "Natural sa akin i-turn ang usapan kay Jesus\nItâ€™s natural for me to turn any conversation to Jesus",
  "Gusto ko sumali sa outreach at street evangelism\nI want to join outreaches and street evangelism",
  "Handa akong magmukhang weird basta maligtas ang tao\nIâ€™m willing to look weird if it means someone gets saved",
  "May prayer list ako ng mga hindi pa saved\nI have a prayer list of unsaved people",
  "Pangarap ko magkaroon ng revival sa school namin\nI dream of a revival in our school",
  "Madalas ako mag-invite ng friends sa church/youth\nI often invite friends to church/youth",
  "Sobrang saya ko kapag may nag-surrender kay Jesus\nI get extremely happy when someone surrenders to Jesus",
  "Kaya ko mag-explain ng Gospel in 2 minutes\nI can explain the Gospel in 2 minutes",
  "Handa akong mag-share kahit sa stranger\nIâ€™m ready to share the Gospel even with strangers",
  "Nag-fa-fast ako for salvation ng iba\nI fast for the salvation of others",
  "Nag-post na ako ng bold testimony online\nIâ€™ve posted a bold testimony online",
  "Feeling ko mission ko talaga ang magligtas ng kaluluwa\nI feel my mission is to save souls",
  "Handa akong magpunta kahit saan para mag-share\nIâ€™m willing to go anywhere to share the Gospel",
  "May na-invite na ako na nagbago ang buhay dahil sa Gospel\nSomeone I invited had their life changed by the Gospel",
  "Hindi ako mapakali kapag maraming hindi pa saved\nI canâ€™t rest when many people are still unsaved",
  // C: WORSHIP & CREATIVE (41â€“60)
  "Sa worship time ako pinaka-nakaka-feel kay Lord\nI feel God the most during worship time",
  "Kumakanta, tumutugtog, sumasayaw, o gumuguhit ako para kay Jesus\nI sing, play music, dance, or draw for Jesus",
  "May sinulat na akong kanta, rap, o sayaw para kay Lord\nIâ€™ve written a song, rap, or dance for God",
  "Worship playlist ko 24/7\nMy playlist is worship music 24/7",
  "Pangarap ko mag-lead ng worship balang araw\nI dream of leading worship someday",
  "Umiyak o nanginginig ako kapag malakas ang presence ni Lord\nI cry or tremble when Godâ€™s presence is strong",
  "Nasa worship team na ako o gusto ko talaga sumali\nIâ€™m already in or really want to join the worship team",
  "Nararamdaman ko kapag dumating si Holy Spirit sa worship\nI can feel when the Holy Spirit comes during worship",
  "May ginawa na akong dance/drama/painting for Jesus\nIâ€™ve created a dance, drama, or painting for Jesus",
  "Mas gusto ko mag-practice ng worship kaysa maglaro\nIâ€™d rather practice worship than play games",
  "May ideas ako palagi for new worship expressions\nI always have ideas for new worship expressions",
  "Kapag may worship, ayaw ko nang matapos\nWhen worship starts, I never want it to end",
  "Sabi ng iba, nakakatulong ang worship ko para makilala nila si God\nPeople say my worship helps them encounter God",
  "Mahilig ako sa flags, banners, arts sa church\nI love flags, banners, and arts in church",
  "May ginawa na akong spoken word o rap for Jesus\nIâ€™ve done spoken word or rap for Jesus",
  "Naaawa ako kapag boring ang worship sa church\nI feel sad when worship in church is boring",
  "Gusto ko matuto ng bagong instrument para sa Diyos\nI want to learn a new instrument for God",
  "Kapag may worship, parang lumilipad ako\nDuring worship, I feel like Iâ€™m flying",
  "May ginawa na akong creative presentation sa youth\nIâ€™ve done a creative presentation in youth service",
  "Feeling ko calling ko talaga ang worship ministry\nI feel my calling is worship ministry",
  // D: DIGITAL MINISTRY (61â€“80)
  "May Christian TikTok, Reels, o YouTube na ako\nI already have a Christian TikTok/Reels/YouTube",
  "Marunong ako mag-edit ng video o gumawa ng designs\nI know how to edit videos or create designs",
  "Naniniwala ako malaki ang maabot ng Gospel sa social media\nI believe the Gospel can reach millions online",
  "Okay lang magpuyat basta maganda ang content ko para kay Jesus\nIâ€™m okay staying up late if the content is for Jesus",
  "Pangarap ko magka-million followers para kay Lord\nI dream of having millions of followers for the Lord",
  "Gusto ko maging full-time Christian content creator\nI want to be a full-time Christian content creator",
  "May camera roll ako na puno ng ideas for Jesus\nMy camera roll is full of ideas for Jesus",
  "Tumutulong na ako sa church/youth social media\nI already help with church/youth social media",
  "Mahilig ako sa Canva, CapCut, Photoshop, etc.\nI love using Canva, CapCut, Photoshop, etc.",
  "Nainis ako kapag pangit ang church posts\nI get annoyed when church posts look ugly",
  "May na-convert na tao dahil sa post ko online\nSomeone got saved because of my online post",
  "Ginagamit ko ang talent ko sa editing para kay Jesus\nI use my editing talent for Jesus",
  "Nag-iisip ako ng viral ideas para sa Gospel\nI think of viral ideas for the Gospel",
  "Gusto ko maging influencer for Christ\nI want to be an influencer for Christ",
  "Marami nang nag-message sakin tungkol sa faith dahil sa posts ko\nMany have messaged me about faith because of my posts",
  "May schedule ako sa pagpo-post ng content para kay Lord\nI have a posting schedule for Jesus content",
  "Nag-iipon ako ng equipment para sa ministry online\nIâ€™m saving up for equipment for online ministry",
  "Mas excited ako sa views/likes kapag para kay Jesus\nI get more excited about views/likes when itâ€™s for Jesus",
  "May series na ako ng Christian content\nI already have a series of Christian content",
  "Feeling ko ang future ng church ay digital\nI believe the future of church is digital",
  // E: MERCY & COMPASSION (81â€“100)
  "Napapansin ko agad kapag malungkot ang tao\nI immediately notice when someone is sad",
  "Parang ako na rin nasasaktan kapag may umiiyak\nI feel the pain when someone is crying",
  "Kahit hindi close, sakin sila nagbubuhos ng kwento\nEven strangers open up and share their problems with me",
  "Gusto ko mag-pray over sa mga nasasaktan\nI love praying over hurting people",
  "Masaya ako mag-serve sa mahihirap at may sakit\nIâ€™m happy serving the poor and the sick",
  "May gift ako ng empathy at compassion\nI have the gift of empathy and compassion",
  "Handa akong magbigay kahit ako na ang mabaon\nIâ€™m willing to give even if I become broke",
  "Gusto ko maging counselor o mentor ng broken people\nI want to counsel or mentor broken people",
  "Naiiyak ako kapag may nagugutom o nasasaktan\nI cry when I see people hungry or hurting",
  "May experience ako sa feeding, medical, o relief missions\nI have experience in feeding/medical/relief missions",
  "Natural sa akin ang mag-comfort ng tao\nComforting people comes naturally to me",
  "Gusto ko magtrabaho sa orphanage o rehab center\nI want to work in an orphanage or rehab center",
  "Maraming nag-thank you sakin dahil nakinig ako\nMany have thanked me just for listening",
  "May burden ako sa mga depressed at suicidal\nI have a burden for the depressed and suicidal",
  "Handa akong mag-sacrifice ng oras para sa nasasaktan\nIâ€™m willing to sacrifice time for hurting people",
  "May na-help na akong tao na gustong magpakamatay\nIâ€™ve helped someone who wanted to end their life",
  "Gusto ko maging prayer intercessor para sa mga broken\nI want to be a prayer intercessor for the broken",
  "Sobrang sensitive ako sa pain ng iba\nIâ€™m extremely sensitive to othersâ€™ pain",
  "May nagbago ang buhay dahil sa pagtulong ko\nSomeoneâ€™s life changed because I helped them",
  "Feeling ko calling ko ang mercy at compassion ministry\nI feel my calling is mercy & compassion ministry",
  // 101: BONUS â€” special format with Aâ€“E choices
"Alin ang PINAKA gusto mong gawin habang buhay para kay Jesus?\nWhich one do you want to do FOR LIFE for Jesus?\nA. Magturo ng Bible at mag-lead ng Bible study\nB. Mag-evangelism at magdala ng kaluluwa kay Jesus\nC. Mag-lead ng worship, music, dance, drama\nD. Digital ministry â€” TikTok, Reels, YouTube for Jesus\nE. Tumulong at magmalasakit sa mga nasasaktan (Mercy)"
];

  function startQuiz() {
    userName = document.getElementById('name').value.trim() || "Youth";

    // Auto-resume only after user clicked Start
    const saved = localStorage.getItem('fireQuiz');
    if (saved) {
      const data = JSON.parse(saved);
      current  = data.current  || 0;
      answered = data.answered || 0;
      scores   = data.scores   || [0,0,0,0,0];
      // Optional: if they changed name, reset everything
      if (data.userName && data.userName !== userName) {
        current = answered = 0;
        scores = [0,0,0,0,0];
        localStorage.removeItem('fireQuiz');
      }
    }

    document.getElementById('intro').style.display = 'none';
    document.getElementById('quiz').style.display  = 'block';
    loadQuestion();
  }

  function loadQuestion() {
    if (current >= questions.length) {
      showResult();
      return;
    }

    const lines = questions[current].split('\n');
    const tagalog = lines[0];
    const english = lines[1] || '';
    const hasChoices = lines.length > 2;

    document.getElementById('qtext').innerHTML = `
      <div class="qt">${tagalog}</div>
      <div class="en">${english}</div>
    `;

    document.getElementById('progressText').textContent = answered + " / 101";
    document.getElementById('bar').style.width = (answered / 101 * 100) + '%';

    const opts = document.getElementById('options');
    opts.innerHTML = '';

    if (hasChoices) {
      // Question 101 â€“ A to E bonus
      for (let i = 2; i < lines.length; i++) {
        const text = lines[i];
        const letter = text[0];
        const index = "ABCDE".indexOf(letter);

        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.style.fontSize = '1.3rem';
        btn.style.padding = '20px';
        btn.textContent = text;
        btn.onclick = () => {
          if (index >= 0) scores[index] += 10; // +10 bonus
          nextQuestion();
        };
        opts.appendChild(btn);
      }
    } else {
      // Normal 0â€“5 scale
      for (let i = 5; i >= 0; i--) {
        const label = i === 5 ? "Sobrang ako talaga!" : i === 0 ? "Hindi talaga" : "";
        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.textContent = i + (label ? ` â€“ ${label}` : '');
        btn.onclick = () => {
          const cat = Math.floor(current / 20);
          scores[cat] += i;
          nextQuestion();
        };
        opts.appendChild(btn);
      }
    }
  }

  function nextQuestion() {
    answered++;
    current++;
    localStorage.setItem('fireQuiz', JSON.stringify({userName, current, answered, scores}));
    loadQuestion();
  }

  function showResult() {
    document.getElementById('quiz').style.display = 'none';
    document.getElementById('result').style.display = 'block';

    document.getElementById('greeting').textContent = `Congratulations, ${userName}!`;

    const max = Math.max(...scores);
    const top = scores.indexOf(max);

    document.getElementById('topWorkshop').innerHTML = `
      <span style="font-size:5.5rem">${icons[top]}</span><br>
      <strong style="font-size:2.8rem">${workshops[top]}</strong>
    `;
    document.getElementById('description').textContent = descriptions[top];
    document.getElementById('verse').textContent = verses[top];

    let scoreHTML = "<div style='margin:40px 0'>";
    workshops.forEach((w,i) => {
      const pct = Math.round(scores[i] / (i===top ? 120 : 110) * 100); // top gets +10 possible
      scoreHTML += `
        <div style="margin:20px 0;text-align:center">
          <div style="font-size:5rem">${icons[i]}</div>
          <div style="font-weight:bold;font-size:1.5rem;color:${i===top?'#c41e3a':'#555'}">${w}</div>
          <div style="font-size:1.2rem">${scores[i]}/110 â€¢ ${pct}%</div>
        </div>`;
    });
    scoreHTML += "</div>";
    document.getElementById('scores').innerHTML = scoreHTML;

    confetti({particleCount:400,spread:90,origin:{y:0.6}});
    document.getElementById('victorySound').play().catch(()=>{});

    // PDF Button
    document.getElementById('downloadBtn').onclick = generateBeautifulPDF;
  }

  function generateBeautifulPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF('p', 'mm', 'a4');
    const pageWidth = doc.internal.pageSize.getWidth();
    const red = [196, 30, 58];

    const sorted = [...scores].map((s, i) => ({score:s, index:i}))
      .sort((a,b)=>b.score-a.score);
    const top1 = sorted[0], top2 = sorted[1];
    const pct1 = Math.round(top1.score / 120 * 100);
    const pct2 = Math.round(top2.score / 110 * 100);

    // Header
    doc.setFillColor(...red);
    doc.rect(0,0,pageWidth,55,'F');
    doc.setTextColor(255,255,255);
    doc.setFontSize(32);
    doc.setFont("helvetica","bold");
    doc.text("YOUTH", pageWidth/2,25,{align:"center"});
    doc.setFontSize(48);
    doc.text("On Fire!", pageWidth/2,42,{align:"center"});

    // Name & Top Calling
    doc.setTextColor(...red);
    doc.setFontSize(34);
    doc.text(userName, pageWidth/2,72,{align:"center"});
    doc.setFontSize(28);
    doc.text(workshops[top1.index], pageWidth/2,92,{align:"center"});

    // Big Circle
    doc.setFillColor(...red);
    doc.circle(pageWidth/2,130,38,'F');
    doc.setTextColor(255,255,255);
    doc.setFontSize(34);
    doc.text(`${pct1}%`, pageWidth/2,138,{align:"center"});

    // Description
    doc.setTextColor(0,0,0);
    doc.setFontSize(13);
    const desc = doc.splitTextToSize(descriptions[top1.index],170);
    doc.text(desc, pageWidth/2,175,{align:"center"});

    // Second Circle
    doc.setFillColor(...red);
    doc.circle(pageWidth/2,218,30,'F');
    doc.setTextColor(255,255,255);
    doc.setFontSize(26);
    doc.text(`${pct2}%`, pageWidth/2,224,{align:"center"});
    doc.setTextColor(...red);
    doc.setFontSize(20);
    doc.text(workshops[top2.index], pageWidth/2,255,{align:"center"});

    // Verse
    doc.setFillColor(255,245,230);
    doc.roundedRect(25,265,pageWidth-50,20,6,6,'F');
    doc.setTextColor(...red);
    doc.setFontSize(14);
    doc.setFont("helvetica","italic");
    doc.text(verses[top1.index], pageWidth/2,276,{align:"center"});

    // Footer
    doc.setTextColor(100,100,100);
    doc.setFontSize(10);
    doc.text("Filipino Evangelical Church â€¢ Christmas Youth Assembly 2025", pageWidth/2,290,{align:"center"});

      // CROSS-PLATFORM DOWNLOAD â€” FIXED FOR ANDROID
    const pdfBlob = doc.output('blob');
  const fileName = `${userName || "Youth"}_FindYourFire_2025.pdf`;
  const url = URL.createObjectURL(pdfBlob);

  const link = document.createElement('a');
  link.href = url;
  link.download = fileName;  // Helps suggest filename where possible
  link.target = '_blank';    // Crucial: open in new tab
  link.rel = 'noopener';     // Security best practice

  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);

  // Cleanup
  setTimeout(() => URL.revokeObjectURL(url), 30000);

  // Helpful instruction for Messenger users
  setTimeout(() => {
    alert('PDF opened in new tab!\n\nOn Messenger/Facebook:\nâ€¢ Tap the â¤“ download icon (top-right)\nâ€¢ Or tap â‹® More â†’ Download/Save to Files');
  }, 800);
}
  function restartQuiz() {
    if (confirm('Are you sure you want to start over? All progress will be deleted.')) {
      localStorage.removeItem('fireQuiz');
      location.reload();
    }
  }

  // OPTIONAL: Auto-resume on page load only if user already started before
  window.addEventListener('load', () => {
    const saved = localStorage.getItem('fireQuiz');
    if (saved && JSON.parse(saved).current > 0) {
      // Show a small resume button or auto-jump? Up to you.
      // For now we do nothing â€“ user must click START again (safer)
    }
  });
</script>
</body>
</html>
